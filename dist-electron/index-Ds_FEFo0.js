"use strict";const me=require("./main-B5GigDE0.js"),fe=require("fs"),pe=require("buffer"),Ee=require("./index-A21liZ6x.js"),K=require("stream"),ge=require("path"),ae=require("util"),we=require("zlib"),be=require("events");function Se(s,z){for(var g=0;g<z.length;g++){const d=z[g];if(typeof d!="string"&&!Array.isArray(d)){for(const o in d)if(o!=="default"&&!(o in s)){const v=Object.getOwnPropertyDescriptor(d,o);v&&Object.defineProperty(s,o,v.get?v:{enumerable:!0,get:()=>d[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var X={exports:{}},re,se;function ze(){if(se)return re;se=1;const{PassThrough:s}=K;return re=z=>{z={...z};const{array:g}=z;let{encoding:d}=z;const o=d==="buffer";let v=!1;g?v=!(d||o):d=d||"utf8",o&&(d=null);const u=new s({objectMode:v});d&&u.setEncoding(d);let y=0;const p=[];return u.on("data",O=>{p.push(O),v?y=p.length:y+=O.length}),u.getBufferedValue=()=>g?p:o?Buffer.concat(p,y):p.join(""),u.getBufferedLength=()=>y,u},re}var oe;function Ce(){if(oe)return X.exports;oe=1;const{constants:s}=pe,z=Ee.requirePump(),g=ze();class d extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function o(v,u){if(!v)return Promise.reject(new Error("Expected a stream"));u={maxBuffer:1/0,...u};const{maxBuffer:y}=u;let p;return await new Promise((O,T)=>{const R=x=>{x&&p.getBufferedLength()<=s.MAX_LENGTH&&(x.bufferedData=p.getBufferedValue()),T(x)};p=z(v,g(u),x=>{if(x){R(x);return}O()}),p.on("data",()=>{p.getBufferedLength()>y&&R(new d)})}),p.getBufferedValue()}return X.exports=o,X.exports.default=o,X.exports.buffer=(v,u)=>o(v,{...u,encoding:"buffer"}),X.exports.array=(v,u)=>o(v,{...u,array:!0}),X.exports.MaxBufferError=d,X.exports}var W={},V={},te,ue;function Fe(){if(ue)return te;ue=1,te=s;function s(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}s.prototype.go=function(d){this.pending<this.max?g(this,d):this.waiting.push(d)},s.prototype.wait=function(d){this.pending===0?d(this.error):this.listeners.push(d)},s.prototype.hold=function(){return z(this)};function z(d){d.pending+=1;var o=!1;return v;function v(y){if(o)throw new Error("callback called twice");if(o=!0,d.error=d.error||y,d.pending-=1,d.waiting.length>0&&d.pending<d.max)g(d,d.waiting.shift());else if(d.pending===0){var p=d.listeners;d.listeners=[],p.forEach(u)}}function u(y){y(d.error)}}function g(d,o){o(z(d))}return te}var ce;function Ie(){if(ce)return V;ce=1;var s=fe,z=ae,g=K,d=g.Readable,o=g.Writable,v=g.PassThrough,u=Fe(),y=be.EventEmitter;V.createFromBuffer=x,V.createFromFd=C,V.BufferSlicer=R,V.FdSlicer=p,z.inherits(p,y);function p(n,i){i=i||{},y.call(this),this.fd=n,this.pend=new u,this.pend.max=1,this.refCount=0,this.autoClose=!!i.autoClose}p.prototype.read=function(n,i,a,c,F){var h=this;h.pend.go(function(I){s.read(h.fd,n,i,a,c,function(L,$,G){I(),F(L,$,G)})})},p.prototype.write=function(n,i,a,c,F){var h=this;h.pend.go(function(I){s.write(h.fd,n,i,a,c,function(L,$,G){I(),F(L,$,G)})})},p.prototype.createReadStream=function(n){return new O(this,n)},p.prototype.createWriteStream=function(n){return new T(this,n)},p.prototype.ref=function(){this.refCount+=1},p.prototype.unref=function(){var n=this;if(n.refCount-=1,n.refCount>0)return;if(n.refCount<0)throw new Error("invalid unref");n.autoClose&&s.close(n.fd,i);function i(a){a?n.emit("error",a):n.emit("close")}},z.inherits(O,d);function O(n,i){i=i||{},d.call(this,i),this.context=n,this.context.ref(),this.start=i.start||0,this.endOffset=i.end,this.pos=this.start,this.destroyed=!1}O.prototype._read=function(n){var i=this;if(!i.destroyed){var a=Math.min(i._readableState.highWaterMark,n);if(i.endOffset!=null&&(a=Math.min(a,i.endOffset-i.pos)),a<=0){i.destroyed=!0,i.push(null),i.context.unref();return}i.context.pend.go(function(c){if(i.destroyed)return c();var F=new Buffer(a);s.read(i.context.fd,F,0,a,i.pos,function(h,I){h?i.destroy(h):I===0?(i.destroyed=!0,i.push(null),i.context.unref()):(i.pos+=I,i.push(F.slice(0,I))),c()})})}},O.prototype.destroy=function(n){this.destroyed||(n=n||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",n),this.context.unref())},z.inherits(T,o);function T(n,i){i=i||{},o.call(this,i),this.context=n,this.context.ref(),this.start=i.start||0,this.endOffset=i.end==null?1/0:+i.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}T.prototype._write=function(n,i,a){var c=this;if(!c.destroyed){if(c.pos+n.length>c.endOffset){var F=new Error("maximum file length exceeded");F.code="ETOOBIG",c.destroy(),a(F);return}c.context.pend.go(function(h){if(c.destroyed)return h();s.write(c.context.fd,n,0,n.length,c.pos,function(I,L){I?(c.destroy(),h(),a(I)):(c.bytesWritten+=L,c.pos+=L,c.emit("progress"),h(),a())})})}},T.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},z.inherits(R,y);function R(n,i){y.call(this),i=i||{},this.refCount=0,this.buffer=n,this.maxChunkSize=i.maxChunkSize||Number.MAX_SAFE_INTEGER}R.prototype.read=function(n,i,a,c,F){var h=c+a,I=h-this.buffer.length,L=I>0?I:a;this.buffer.copy(n,i,c,h),setImmediate(function(){F(null,L)})},R.prototype.write=function(n,i,a,c,F){n.copy(this.buffer,c,i,i+a),setImmediate(function(){F(null,a,n)})},R.prototype.createReadStream=function(n){n=n||{};var i=new v(n);i.destroyed=!1,i.start=n.start||0,i.endOffset=n.end,i.pos=i.endOffset||this.buffer.length;for(var a=this.buffer.slice(i.start,i.pos),c=0;;){var F=c+this.maxChunkSize;if(F>=a.length){c<a.length&&i.write(a.slice(c,a.length));break}i.write(a.slice(c,F)),c=F}return i.end(),i.destroy=function(){i.destroyed=!0},i},R.prototype.createWriteStream=function(n){var i=this;n=n||{};var a=new o(n);return a.start=n.start||0,a.endOffset=n.end==null?this.buffer.length:+n.end,a.bytesWritten=0,a.pos=a.start,a.destroyed=!1,a._write=function(c,F,h){if(!a.destroyed){var I=a.pos+c.length;if(I>a.endOffset){var L=new Error("maximum file length exceeded");L.code="ETOOBIG",a.destroyed=!0,h(L);return}c.copy(i.buffer,a.pos,0,c.length),a.bytesWritten+=c.length,a.pos=I,a.emit("progress"),h()}},a.destroy=function(){a.destroyed=!0},a},R.prototype.ref=function(){this.refCount+=1},R.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function x(n,i){return new R(n,i)}function C(n,i){return new p(n,i)}return V}var ne,le;function Le(){if(le)return ne;le=1;var s=pe.Buffer,z=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(z=new Int32Array(z));function g(u){if(s.isBuffer(u))return u;var y=typeof s.alloc=="function"&&typeof s.from=="function";if(typeof u=="number")return y?s.alloc(u):new s(u);if(typeof u=="string")return y?s.from(u):new s(u);throw new Error("input must be buffer, number, or string, received "+typeof u)}function d(u){var y=g(4);return y.writeInt32BE(u,0),y}function o(u,y){u=g(u),s.isBuffer(y)&&(y=y.readUInt32BE(0));for(var p=~~y^-1,O=0;O<u.length;O++)p=z[(p^u[O])&255]^p>>>8;return p^-1}function v(){return d(o.apply(null,arguments))}return v.signed=function(){return o.apply(null,arguments)},v.unsigned=function(){return o.apply(null,arguments)>>>0},ne=v,ne}var xe;function Be(){if(xe)return W;xe=1;var s=fe,z=we,g=Ie(),d=Le(),o=ae,v=be.EventEmitter,u=K.Transform,y=K.PassThrough,p=K.Writable;W.open=O,W.fromFd=T,W.fromBuffer=R,W.fromRandomAccessReader=x,W.dosDateTimeToDate=c,W.validateFileName=F,W.ZipFile=C,W.Entry=a,W.RandomAccessReader=L;function O(r,e,f){typeof e=="function"&&(f=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),f==null&&(f=k),s.open(r,"r",function(t,m){if(t)return f(t);T(m,e,function(l,b){l&&s.close(m,k),f(l,b)})})}function T(r,e,f){typeof e=="function"&&(f=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),f==null&&(f=k),s.fstat(r,function(t,m){if(t)return f(t);var l=g.createFromFd(r,{autoClose:!0});x(l,m.size,e,f)})}function R(r,e,f){typeof e=="function"&&(f=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var t=g.createFromBuffer(r,{maxChunkSize:65536});x(t,r.length,e,f)}function x(r,e,f,t){typeof f=="function"&&(t=f,f=null),f==null&&(f={}),f.autoClose==null&&(f.autoClose=!0),f.lazyEntries==null&&(f.lazyEntries=!1),f.decodeStrings==null&&(f.decodeStrings=!0);var m=!!f.decodeStrings;if(f.validateEntrySizes==null&&(f.validateEntrySizes=!0),f.strictFileNames==null&&(f.strictFileNames=!1),t==null&&(t=k),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");r.ref();var l=22,b=65535,S=Math.min(l+b,e),w=j(S),B=e-w.length;h(r,w,0,S,B,function(E){if(E)return t(E);for(var A=S-l;A>=0;A-=1)if(w.readUInt32LE(A)===101010256){var q=w.slice(A),D=q.readUInt16LE(4);if(D!==0)return t(new Error("multi-disk zip files are not supported: found disk number: "+D));var Z=q.readUInt16LE(10),U=q.readUInt32LE(16),N=q.readUInt16LE(20),M=q.length-l;if(N!==M)return t(new Error("invalid comment length. expected: "+M+". found: "+N));var _=m?Y(q,22,q.length,!1):q.slice(22);if(!(Z===65535||U===4294967295))return t(null,new C(r,U,e,Z,_,f.autoClose,f.lazyEntries,m,f.validateEntrySizes,f.strictFileNames));var P=j(20),ee=B+A-P.length;h(r,P,0,P.length,ee,function(J){if(J)return t(J);if(P.readUInt32LE(0)!==117853008)return t(new Error("invalid zip64 end of central directory locator signature"));var ye=H(P,8),Q=j(56);h(r,Q,0,Q.length,ye,function(de){return de?t(de):Q.readUInt32LE(0)!==101075792?t(new Error("invalid zip64 end of central directory record signature")):(Z=H(Q,32),U=H(Q,48),t(null,new C(r,U,e,Z,_,f.autoClose,f.lazyEntries,m,f.validateEntrySizes,f.strictFileNames)))})});return}t(new Error("end of central directory record signature not found"))})}o.inherits(C,v);function C(r,e,f,t,m,l,b,S,w,B){var E=this;v.call(E),E.reader=r,E.reader.on("error",function(A){i(E,A)}),E.reader.once("close",function(){E.emit("close")}),E.readEntryCursor=e,E.fileSize=f,E.entryCount=t,E.comment=m,E.entriesRead=0,E.autoClose=!!l,E.lazyEntries=!!b,E.decodeStrings=!!S,E.validateEntrySizes=!!w,E.strictFileNames=!!B,E.isOpen=!0,E.emittedError=!1,E.lazyEntries||E._readEntry()}C.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function n(r,e){r.autoClose&&r.close(),i(r,e)}function i(r,e){r.emittedError||(r.emittedError=!0,r.emit("error",e))}C.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},C.prototype._readEntry=function(){var r=this;if(r.entryCount===r.entriesRead){setImmediate(function(){r.autoClose&&r.close(),!r.emittedError&&r.emit("end")});return}if(!r.emittedError){var e=j(46);h(r.reader,e,0,e.length,r.readEntryCursor,function(f){if(f)return n(r,f);if(!r.emittedError){var t=new a,m=e.readUInt32LE(0);if(m!==33639248)return n(r,new Error("invalid central directory file header signature: 0x"+m.toString(16)));if(t.versionMadeBy=e.readUInt16LE(4),t.versionNeededToExtract=e.readUInt16LE(6),t.generalPurposeBitFlag=e.readUInt16LE(8),t.compressionMethod=e.readUInt16LE(10),t.lastModFileTime=e.readUInt16LE(12),t.lastModFileDate=e.readUInt16LE(14),t.crc32=e.readUInt32LE(16),t.compressedSize=e.readUInt32LE(20),t.uncompressedSize=e.readUInt32LE(24),t.fileNameLength=e.readUInt16LE(28),t.extraFieldLength=e.readUInt16LE(30),t.fileCommentLength=e.readUInt16LE(32),t.internalFileAttributes=e.readUInt16LE(36),t.externalFileAttributes=e.readUInt32LE(38),t.relativeOffsetOfLocalHeader=e.readUInt32LE(42),t.generalPurposeBitFlag&64)return n(r,new Error("strong encryption is not supported"));r.readEntryCursor+=46,e=j(t.fileNameLength+t.extraFieldLength+t.fileCommentLength),h(r.reader,e,0,e.length,r.readEntryCursor,function(l){if(l)return n(r,l);if(!r.emittedError){var b=(t.generalPurposeBitFlag&2048)!==0;t.fileName=r.decodeStrings?Y(e,0,t.fileNameLength,b):e.slice(0,t.fileNameLength);var S=t.fileNameLength+t.extraFieldLength,w=e.slice(t.fileNameLength,S);t.extraFields=[];for(var B=0;B<w.length-3;){var E=w.readUInt16LE(B+0),A=w.readUInt16LE(B+2),q=B+4,D=q+A;if(D>w.length)return n(r,new Error("extra field length exceeds extra field buffer size"));var Z=j(A);w.copy(Z,0,q,D),t.extraFields.push({id:E,data:Z}),B=D}if(t.fileComment=r.decodeStrings?Y(e,S,S+t.fileCommentLength,b):e.slice(S,S+t.fileCommentLength),t.comment=t.fileComment,r.readEntryCursor+=e.length,r.entriesRead+=1,t.uncompressedSize===4294967295||t.compressedSize===4294967295||t.relativeOffsetOfLocalHeader===4294967295){for(var U=null,B=0;B<t.extraFields.length;B++){var N=t.extraFields[B];if(N.id===1){U=N.data;break}}if(U==null)return n(r,new Error("expected zip64 extended information extra field"));var M=0;if(t.uncompressedSize===4294967295){if(M+8>U.length)return n(r,new Error("zip64 extended information extra field does not include uncompressed size"));t.uncompressedSize=H(U,M),M+=8}if(t.compressedSize===4294967295){if(M+8>U.length)return n(r,new Error("zip64 extended information extra field does not include compressed size"));t.compressedSize=H(U,M),M+=8}if(t.relativeOffsetOfLocalHeader===4294967295){if(M+8>U.length)return n(r,new Error("zip64 extended information extra field does not include relative header offset"));t.relativeOffsetOfLocalHeader=H(U,M),M+=8}}if(r.decodeStrings)for(var B=0;B<t.extraFields.length;B++){var N=t.extraFields[B];if(N.id===28789){if(N.data.length<6||N.data.readUInt8(0)!==1)continue;var _=N.data.readUInt32LE(1);if(d.unsigned(e.slice(0,t.fileNameLength))!==_)continue;t.fileName=Y(N.data,5,N.data.length,!0);break}}if(r.validateEntrySizes&&t.compressionMethod===0){var P=t.uncompressedSize;if(t.isEncrypted()&&(P+=12),t.compressedSize!==P){var ee="compressed/uncompressed size mismatch for stored file: "+t.compressedSize+" != "+t.uncompressedSize;return n(r,new Error(ee))}}if(r.decodeStrings){r.strictFileNames||(t.fileName=t.fileName.replace(/\\/g,"/"));var J=F(t.fileName,r.validateFileNameOptions);if(J!=null)return n(r,new Error(J))}r.emit("entry",t),r.lazyEntries||r._readEntry()}})}})}},C.prototype.openReadStream=function(r,e,f){var t=this,m=0,l=r.compressedSize;if(f==null)f=e,e={};else{if(e.decrypt!=null){if(!r.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(r.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!r.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(r.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(r.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(m=e.start,m<0)throw new Error("options.start < 0");if(m>r.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(l=e.end,l<0)throw new Error("options.end < 0");if(l>r.compressedSize)throw new Error("options.end > entry.compressedSize");if(l<m)throw new Error("options.end < options.start")}}if(!t.isOpen)return f(new Error("closed"));if(r.isEncrypted()&&e.decrypt!==!1)return f(new Error("entry is encrypted, and options.decrypt !== false"));t.reader.ref();var b=j(30);h(t.reader,b,0,b.length,r.relativeOffsetOfLocalHeader,function(S){try{if(S)return f(S);var w=b.readUInt32LE(0);if(w!==67324752)return f(new Error("invalid local file header signature: 0x"+w.toString(16)));var B=b.readUInt16LE(26),E=b.readUInt16LE(28),A=r.relativeOffsetOfLocalHeader+b.length+B+E,q;if(r.compressionMethod===0)q=!1;else if(r.compressionMethod===8)q=e.decompress!=null?e.decompress:!0;else return f(new Error("unsupported compression method: "+r.compressionMethod));var D=A,Z=D+r.compressedSize;if(r.compressedSize!==0&&Z>t.fileSize)return f(new Error("file data overflows file bounds: "+D+" + "+r.compressedSize+" > "+t.fileSize));var U=t.reader.createReadStream({start:D+m,end:D+l}),N=U;if(q){var M=!1,_=z.createInflateRaw();U.on("error",function(P){setImmediate(function(){M||_.emit("error",P)})}),U.pipe(_),t.validateEntrySizes?(N=new I(r.uncompressedSize),_.on("error",function(P){setImmediate(function(){M||N.emit("error",P)})}),_.pipe(N)):N=_,N.destroy=function(){M=!0,_!==N&&_.unpipe(N),U.unpipe(_),U.destroy()}}f(null,N)}finally{t.reader.unref()}})};function a(){}a.prototype.getLastModDate=function(){return c(this.lastModFileDate,this.lastModFileTime)},a.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0},a.prototype.isCompressed=function(){return this.compressionMethod===8};function c(r,e){var f=r&31,t=(r>>5&15)-1,m=(r>>9&127)+1980,l=0,b=(e&31)*2,S=e>>5&63,w=e>>11&31;return new Date(m,t,f,w,S,b,l)}function F(r){return r.indexOf("\\")!==-1?"invalid characters in fileName: "+r:/^[a-zA-Z]:/.test(r)||/^\//.test(r)?"absolute path: "+r:r.split("/").indexOf("..")!==-1?"invalid relative path: "+r:null}function h(r,e,f,t,m,l){if(t===0)return setImmediate(function(){l(null,j(0))});r.read(e,f,t,m,function(b,S){if(b)return l(b);if(S<t)return l(new Error("unexpected EOF"));l()})}o.inherits(I,u);function I(r){u.call(this),this.actualByteCount=0,this.expectedByteCount=r}I.prototype._transform=function(r,e,f){if(this.actualByteCount+=r.length,this.actualByteCount>this.expectedByteCount){var t="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return f(new Error(t))}f(null,r)},I.prototype._flush=function(r){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return r(new Error(e))}r()},o.inherits(L,v);function L(){v.call(this),this.refCount=0}L.prototype.ref=function(){this.refCount+=1},L.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.close(e);function e(f){if(f)return r.emit("error",f);r.emit("close")}},L.prototype.createReadStream=function(r){var e=r.start,f=r.end;if(e===f){var t=new y;return setImmediate(function(){t.end()}),t}var m=this._readStreamForRange(e,f),l=!1,b=new $(this);m.on("error",function(w){setImmediate(function(){l||b.emit("error",w)})}),b.destroy=function(){m.unpipe(b),b.unref(),m.destroy()};var S=new I(f-e);return b.on("error",function(w){setImmediate(function(){l||S.emit("error",w)})}),S.destroy=function(){l=!0,b.unpipe(S),b.destroy()},m.pipe(b).pipe(S)},L.prototype._readStreamForRange=function(r,e){throw new Error("not implemented")},L.prototype.read=function(r,e,f,t,m){var l=this.createReadStream({start:t,end:t+f}),b=new p,S=0;b._write=function(w,B,E){w.copy(r,e+S,0,w.length),S+=w.length,E()},b.on("finish",m),l.on("error",function(w){m(w)}),l.pipe(b)},L.prototype.close=function(r){setImmediate(r)},o.inherits($,y);function $(r){y.call(this),this.context=r,this.context.ref(),this.unreffedYet=!1}$.prototype._flush=function(r){this.unref(),r()},$.prototype.unref=function(r){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var G="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function Y(r,e,f,t){if(t)return r.toString("utf8",e,f);for(var m="",l=e;l<f;l++)m+=G[r[l]];return m}function H(r,e){var f=r.readUInt32LE(e),t=r.readUInt32LE(e+4);return t*4294967296+f}var j;typeof Buffer.allocUnsafe=="function"?j=function(r){return Buffer.allocUnsafe(r)}:j=function(r){return new Buffer(r)};function k(r){if(r)throw r}return W}var ie,he;function Ne(){if(he)return ie;he=1;const s=me.requireSrc()("extract-zip"),{createWriteStream:z,promises:g}=fe,d=Ce(),o=ge,{promisify:v}=ae,u=K,y=Be(),p=v(y.open),O=v(u.pipeline);class T{constructor(x,C){this.zipPath=x,this.opts=C}async extract(){return s("opening",this.zipPath,"with opts",this.opts),this.zipfile=await p(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((x,C)=>{this.zipfile.on("error",n=>{this.canceled=!0,C(n)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(s("zip extraction complete"),x())}),this.zipfile.on("entry",async n=>{if(this.canceled){s("skipping entry",n.fileName,{cancelled:this.canceled});return}if(s("zipfile entry",n.fileName),n.fileName.startsWith("__MACOSX/")){this.zipfile.readEntry();return}const i=o.dirname(o.join(this.opts.dir,n.fileName));try{await g.mkdir(i,{recursive:!0});const a=await g.realpath(i);if(o.relative(this.opts.dir,a).split(o.sep).includes(".."))throw new Error(`Out of bound path "${a}" found while processing file ${n.fileName}`);await this.extractEntry(n),s("finished processing",n.fileName),this.zipfile.readEntry()}catch(a){this.canceled=!0,this.zipfile.close(),C(a)}})})}async extractEntry(x){if(this.canceled){s("skipping entry extraction",x.fileName,{cancelled:this.canceled});return}this.opts.onEntry&&this.opts.onEntry(x,this.zipfile);const C=o.join(this.opts.dir,x.fileName),n=x.externalFileAttributes>>16&65535,i=61440,a=16384,F=(n&i)===40960;let h=(n&i)===a;!h&&x.fileName.endsWith("/")&&(h=!0);const I=x.versionMadeBy>>8;h||(h=I===0&&x.externalFileAttributes===16),s("extracting entry",{filename:x.fileName,isDir:h,isSymlink:F});const L=this.getExtractedMode(n,h)&511,$=h?C:o.dirname(C),G={recursive:!0};if(h&&(G.mode=L),s("mkdir",{dir:$,...G}),await g.mkdir($,G),h)return;s("opening read stream",C);const Y=await v(this.zipfile.openReadStream.bind(this.zipfile))(x);if(F){const H=await d(Y);s("creating symlink",H,C),await g.symlink(H,C)}else await O(Y,z(C,{mode:L}))}getExtractedMode(x,C){let n=x;return n===0&&(C?(this.opts.defaultDirMode&&(n=parseInt(this.opts.defaultDirMode,10)),n||(n=493)):(this.opts.defaultFileMode&&(n=parseInt(this.opts.defaultFileMode,10)),n||(n=420))),n}}return ie=async function(R,x){if(s("creating target directory",x.dir),!o.isAbsolute(x.dir))throw new Error("Target directory is expected to be absolute");return await g.mkdir(x.dir,{recursive:!0}),x.dir=await g.realpath(x.dir),new T(R,x).extract()},ie}var ve=Ne();const Ue=me.getDefaultExportFromCjs(ve),Oe=Se({__proto__:null,default:Ue},[ve]);exports.index=Oe;
